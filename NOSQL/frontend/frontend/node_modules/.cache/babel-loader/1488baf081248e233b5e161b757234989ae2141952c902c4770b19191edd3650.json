{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\pc\\\\Downloads\\\\NOSQL\\\\frontend\\\\frontend\\\\src\\\\app.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\n// App.js - Version Finale HarmonisÃ©e\nimport React, { useState } from 'react';\nimport { BrowserRouter, Routes, Route, useNavigate } from 'react-router-dom';\nimport recoIcon from './recommandations(2).png';\n\n// Import des composants\nimport Login from './Login';\nimport Products from './Products';\nimport Recommendations from './Recommendations';\nimport Navbar from './Navbar';\nimport Cart from './Cart';\nimport Wishlist from './Wishlist';\nimport Purchases from './Purchases';\n\n// --- COMPOSANT HOME (ACCUEIL) ---\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Home({\n  user,\n  cartItems,\n  wishlistItems,\n  onAddToCart,\n  onAddToWishlist\n}) {\n  _s();\n  const navigate = useNavigate();\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      minHeight: '100vh',\n      fontFamily: 'Monospace',\n      backgroundColor: '#f8f9fa'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"style\", {\n      children: `\n        :root {\n          --blue-dark: #00326f;\n          --blue-light: #0151aa;\n          --bg-input: #0753b0ff;\n          --gradient: linear-gradient(90deg, #00326f 0%, #041830ff 100%);\n        }\n\n        /* BanniÃ¨re d'accueil Brutaliste */\n        .brutalist-banner {\n          background-color: var(--blue-dark);\n          color: white;\n          padding: 40px;\n          border: 4px solid var(--blue-dark);\n          box-shadow: 12px 12px 0px var(--blue-light);\n          margin-bottom: 50px;\n          position: relative;\n          overflow: hidden;\n        }\n\n        .brutalist-banner h1 {\n          font-weight: 900;\n          text-transform: uppercase;\n          letter-spacing: 2px;\n        }\n\n        /* Bouton 3D Recommendations */\n        .btn-3d-recs {\n          cursor: pointer;\n          border: 0;\n          background: transparent;\n          color: #fff;\n          padding: 15px 25px;\n          font-weight: bold;\n          font-size: 16px;\n          text-transform: uppercase;\n          letter-spacing: 0.1em;\n          position: relative;\n          display: inline-block;\n          margin-top: 15px;\n        }\n\n        .block-cube { position: relative; }\n        .block-cube .bg-top {\n          position: absolute; height: 10px; background: var(--gradient);\n          bottom: 100%; left: 5px; right: -5px; transform: skew(-45deg, 0);\n          transition: all 0.2s;\n        }\n        .block-cube .bg-right {\n          position: absolute; background: var(--blue-light);\n          top: -5px; bottom: 5px; width: 10px; left: 100%;\n          transform: skew(0, -45deg); transition: all 0.2s;\n        }\n        .block-cube .bg {\n          position: absolute; left: 0; top: 0; right: 0; bottom: 0;\n          background: var(--gradient); transition: all 0.2s;\n        }\n        .block-cube .bg-inner {\n          background: var(--bg-input);\n          position: absolute; left: 2px; top: 2px; right: 2px; bottom: 2px;\n          transition: all 0.2s;\n        }\n        .block-cube-hover:hover .bg-inner { top: 100% !important; }\n        .text-label { position: relative; z-index: 3; }\n      `\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 21,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container py-5\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"brutalist-banner\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: [\"BIENVENUE \", user.firstName.toUpperCase(), \" ! \\uD83D\\uDC4B\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"lead mb-4\",\n          children: \"VOTRE EXP\\xC9RIENCE SHOPPING PERSONNALIS\\xC9E COMMENCE ICI.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn-3d-recs block-cube block-cube-hover\",\n          onClick: () => navigate('/recommendations'),\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-top\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-inner\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-right\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-inner\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 39\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-inner\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-label\",\n            children: [\" \", /*#__PURE__*/_jsxDEV(\"img\", {\n              src: recoIcon,\n              alt: \"Icon\",\n              style: {\n                width: '32px',\n                marginRight: '15px'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 43\n            }, this), \" VOIR MES RECOMMANDATIONS\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Products, {\n        user: user,\n        onAddToCart: onAddToCart,\n        onAddToWishlist: onAddToWishlist,\n        wishlistItems: wishlistItems\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 20,\n    columnNumber: 5\n  }, this);\n}\n\n// --- COMPOSANT APP PRINCIPAL ---\n_s(Home, \"CzcTeTziyjMsSrAVmHuCCb6+Bfg=\", false, function () {\n  return [useNavigate];\n});\n_c = Home;\nexport default function App() {\n  _s2();\n  const [user, setUser] = useState(null);\n  const [cartItems, setCartItems] = useState([]);\n  const [wishlistItems, setWishlistItems] = useState([]);\n\n  // GÃ©rer la connexion et charger les donnÃ©es\n  async function handleLogin(userData) {\n    setUser(userData);\n    try {\n      // Charger le panier\n      const cartRes = await fetch(`http://localhost:4000/api/cart/${userData._id}`);\n      const cartData = await cartRes.json();\n      setCartItems(cartData.cart.map(item => item.product_id));\n\n      // Charger la wishlist\n      const wishRes = await fetch(`http://localhost:4000/api/wishlist/${userData._id}`);\n      const wishData = await wishRes.json();\n      setWishlistItems(wishData.map(item => item.product_id));\n    } catch (err) {\n      console.log(\"Initialisation des donnÃ©es vide\");\n    }\n  }\n\n  // DÃ©connexion complÃ¨te\n  function handleLogout() {\n    setUser(null);\n    setCartItems([]);\n    setWishlistItems([]);\n    localStorage.clear();\n  }\n\n  // Ajouter au panier\n  function handleAddToCart(product) {\n    setCartItems([...cartItems, product]);\n    if (user) {\n      fetch('http://localhost:4000/api/cart/add', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          userId: user._id,\n          productId: product._id,\n          quantity: 1\n        })\n      }).catch(err => console.error('Erreur API Panier:', err));\n    }\n    alert(`âœ… ${product.name} ajoutÃ© au panier !`);\n  }\n\n  // Ajouter/Retirer de la wishlist\n  function handleAddToWishlist(product) {\n    const isInWishlist = wishlistItems.some(item => item._id === product._id);\n    if (isInWishlist) {\n      setWishlistItems(wishlistItems.filter(item => item._id !== product._id));\n      if (user) {\n        fetch('http://localhost:4000/api/wishlist/remove', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            userId: user._id,\n            productId: product._id\n          })\n        });\n      }\n      alert(`ðŸ¤ ${product.name} retirÃ© de la liste`);\n    } else {\n      setWishlistItems([...wishlistItems, product]);\n      if (user) {\n        fetch('http://localhost:4000/api/wishlist/add', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            userId: user._id,\n            productId: product._id\n          })\n        });\n      }\n      alert(`â¤ï¸ ${product.name} ajoutÃ© Ã  la liste !`);\n    }\n  }\n\n  // Supprimer du panier\n  function handleRemoveFromCart(productId) {\n    setCartItems(cartItems.filter(item => item._id !== productId));\n    if (user) {\n      fetch('http://localhost:4000/api/cart/remove', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          userId: user._id,\n          productId: productId\n        })\n      });\n    }\n  }\n\n  // Supprimer de la wishlist (via page Wishlist)\n  function handleRemoveFromWishlist(productId) {\n    setWishlistItems(wishlistItems.filter(item => item._id !== productId));\n    if (user) {\n      fetch('http://localhost:4000/api/wishlist/remove', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          userId: user._id,\n          productId: productId\n        })\n      });\n    }\n  }\n\n  // Validation du panier\n  async function handleCheckout() {\n    try {\n      for (const item of cartItems) {\n        await fetch('http://localhost:4000/api/purchase', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            userId: user._id,\n            productId: item._id\n          })\n        });\n      }\n      setCartItems([]);\n      if (user) {\n        fetch(`http://localhost:4000/api/cart/clear/${user._id}`, {\n          method: 'POST'\n        });\n      }\n    } catch (err) {\n      throw new Error(\"Ã‰chec du paiement\");\n    }\n  }\n\n  // Protection par Login\n  if (!user) return /*#__PURE__*/_jsxDEV(Login, {\n    onLogin: handleLogin\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 232,\n    columnNumber: 21\n  }, this);\n  return /*#__PURE__*/_jsxDEV(BrowserRouter, {\n    children: [/*#__PURE__*/_jsxDEV(Navbar, {\n      user: user,\n      cartCount: cartItems.length,\n      onLogout: handleLogout\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Routes, {\n      children: [/*#__PURE__*/_jsxDEV(Route, {\n        path: \"/\",\n        element: /*#__PURE__*/_jsxDEV(Home, {\n          user: user,\n          cartItems: cartItems,\n          wishlistItems: wishlistItems,\n          onAddToCart: handleAddToCart,\n          onAddToWishlist: handleAddToWishlist\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/recommendations\",\n        element: /*#__PURE__*/_jsxDEV(Recommendations, {\n          user: user\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 49\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/cart\",\n        element: /*#__PURE__*/_jsxDEV(Cart, {\n          cartItems: cartItems,\n          onRemove: handleRemoveFromCart,\n          onCheckout: handleCheckout\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 20\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/wishlist\",\n        element: /*#__PURE__*/_jsxDEV(Wishlist, {\n          wishlistItems: wishlistItems,\n          onRemove: handleRemoveFromWishlist\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 20\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/purchases\",\n        element: /*#__PURE__*/_jsxDEV(Purchases, {\n          user: user\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 43\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 235,\n    columnNumber: 5\n  }, this);\n}\n_s2(App, \"a65LB7aRx9aXw29o9cSqLA8Isxc=\");\n_c2 = App;\nvar _c, _c2;\n$RefreshReg$(_c, \"Home\");\n$RefreshReg$(_c2, \"App\");","map":{"version":3,"names":["React","useState","BrowserRouter","Routes","Route","useNavigate","recoIcon","Login","Products","Recommendations","Navbar","Cart","Wishlist","Purchases","jsxDEV","_jsxDEV","Home","user","cartItems","wishlistItems","onAddToCart","onAddToWishlist","_s","navigate","style","minHeight","fontFamily","backgroundColor","children","fileName","_jsxFileName","lineNumber","columnNumber","className","firstName","toUpperCase","onClick","src","alt","width","marginRight","_c","App","_s2","setUser","setCartItems","setWishlistItems","handleLogin","userData","cartRes","fetch","_id","cartData","json","cart","map","item","product_id","wishRes","wishData","err","console","log","handleLogout","localStorage","clear","handleAddToCart","product","method","headers","body","JSON","stringify","userId","productId","quantity","catch","error","alert","name","handleAddToWishlist","isInWishlist","some","filter","handleRemoveFromCart","handleRemoveFromWishlist","handleCheckout","Error","onLogin","cartCount","length","onLogout","path","element","onRemove","onCheckout","_c2","$RefreshReg$"],"sources":["C:/Users/pc/Downloads/NOSQL/frontend/frontend/src/app.js"],"sourcesContent":["// App.js - Version Finale HarmonisÃ©e\r\nimport React, { useState } from 'react';\r\nimport { BrowserRouter, Routes, Route, useNavigate } from 'react-router-dom';\r\nimport recoIcon from './recommandations(2).png';\r\n\r\n// Import des composants\r\nimport Login from './Login';\r\nimport Products from './Products';\r\nimport Recommendations from './Recommendations';\r\nimport Navbar from './Navbar';\r\nimport Cart from './Cart';\r\nimport Wishlist from './Wishlist';\r\nimport Purchases from './Purchases';\r\n\r\n// --- COMPOSANT HOME (ACCUEIL) ---\r\nfunction Home({ user, cartItems, wishlistItems, onAddToCart, onAddToWishlist }) {\r\n  const navigate = useNavigate();\r\n\r\n  return (\r\n    <div style={{ minHeight: '100vh', fontFamily: 'Monospace', backgroundColor: '#f8f9fa' }}>\r\n      <style>{`\r\n        :root {\r\n          --blue-dark: #00326f;\r\n          --blue-light: #0151aa;\r\n          --bg-input: #0753b0ff;\r\n          --gradient: linear-gradient(90deg, #00326f 0%, #041830ff 100%);\r\n        }\r\n\r\n        /* BanniÃ¨re d'accueil Brutaliste */\r\n        .brutalist-banner {\r\n          background-color: var(--blue-dark);\r\n          color: white;\r\n          padding: 40px;\r\n          border: 4px solid var(--blue-dark);\r\n          box-shadow: 12px 12px 0px var(--blue-light);\r\n          margin-bottom: 50px;\r\n          position: relative;\r\n          overflow: hidden;\r\n        }\r\n\r\n        .brutalist-banner h1 {\r\n          font-weight: 900;\r\n          text-transform: uppercase;\r\n          letter-spacing: 2px;\r\n        }\r\n\r\n        /* Bouton 3D Recommendations */\r\n        .btn-3d-recs {\r\n          cursor: pointer;\r\n          border: 0;\r\n          background: transparent;\r\n          color: #fff;\r\n          padding: 15px 25px;\r\n          font-weight: bold;\r\n          font-size: 16px;\r\n          text-transform: uppercase;\r\n          letter-spacing: 0.1em;\r\n          position: relative;\r\n          display: inline-block;\r\n          margin-top: 15px;\r\n        }\r\n\r\n        .block-cube { position: relative; }\r\n        .block-cube .bg-top {\r\n          position: absolute; height: 10px; background: var(--gradient);\r\n          bottom: 100%; left: 5px; right: -5px; transform: skew(-45deg, 0);\r\n          transition: all 0.2s;\r\n        }\r\n        .block-cube .bg-right {\r\n          position: absolute; background: var(--blue-light);\r\n          top: -5px; bottom: 5px; width: 10px; left: 100%;\r\n          transform: skew(0, -45deg); transition: all 0.2s;\r\n        }\r\n        .block-cube .bg {\r\n          position: absolute; left: 0; top: 0; right: 0; bottom: 0;\r\n          background: var(--gradient); transition: all 0.2s;\r\n        }\r\n        .block-cube .bg-inner {\r\n          background: var(--bg-input);\r\n          position: absolute; left: 2px; top: 2px; right: 2px; bottom: 2px;\r\n          transition: all 0.2s;\r\n        }\r\n        .block-cube-hover:hover .bg-inner { top: 100% !important; }\r\n        .text-label { position: relative; z-index: 3; }\r\n      `}</style>\r\n\r\n      <div className=\"container py-5\">\r\n        {/* Welcome Section */}\r\n        <div className=\"brutalist-banner\">\r\n          <h1>BIENVENUE {user.firstName.toUpperCase()} ! ðŸ‘‹</h1>\r\n          <p className=\"lead mb-4\">\r\n            VOTRE EXPÃ‰RIENCE SHOPPING PERSONNALISÃ‰E COMMENCE ICI.\r\n          </p>\r\n          <button\r\n            className=\"btn-3d-recs block-cube block-cube-hover\"\r\n            onClick={() => navigate('/recommendations')}\r\n          >\r\n            <div className=\"bg-top\"><div className=\"bg-inner\"></div></div>\r\n            <div className=\"bg-right\"><div className=\"bg-inner\"></div></div>\r\n            <div className=\"bg\"><div className=\"bg-inner\"></div></div>\r\n            <span className=\"text-label\"> <img src={recoIcon} alt=\"Icon\" style={{ width: '32px', marginRight: '15px' }} /> VOIR MES RECOMMANDATIONS</span>\r\n          </button>\r\n        </div>\r\n\r\n        {/* Section Catalogue Produits */}\r\n        <Products\r\n          user={user}\r\n          onAddToCart={onAddToCart}\r\n          onAddToWishlist={onAddToWishlist}\r\n          wishlistItems={wishlistItems}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// --- COMPOSANT APP PRINCIPAL ---\r\nexport default function App() {\r\n  const [user, setUser] = useState(null);\r\n  const [cartItems, setCartItems] = useState([]);\r\n  const [wishlistItems, setWishlistItems] = useState([]);\r\n\r\n  // GÃ©rer la connexion et charger les donnÃ©es\r\n  async function handleLogin(userData) {\r\n    setUser(userData);\r\n    try {\r\n      // Charger le panier\r\n      const cartRes = await fetch(`http://localhost:4000/api/cart/${userData._id}`);\r\n      const cartData = await cartRes.json();\r\n      setCartItems(cartData.cart.map(item => item.product_id));\r\n\r\n      // Charger la wishlist\r\n      const wishRes = await fetch(`http://localhost:4000/api/wishlist/${userData._id}`);\r\n      const wishData = await wishRes.json();\r\n      setWishlistItems(wishData.map(item => item.product_id));\r\n    } catch (err) {\r\n      console.log(\"Initialisation des donnÃ©es vide\");\r\n    }\r\n  }\r\n\r\n  // DÃ©connexion complÃ¨te\r\n  function handleLogout() {\r\n    setUser(null);\r\n    setCartItems([]);\r\n    setWishlistItems([]);\r\n    localStorage.clear();\r\n  }\r\n\r\n  // Ajouter au panier\r\n  function handleAddToCart(product) {\r\n    setCartItems([...cartItems, product]);\r\n    if (user) {\r\n      fetch('http://localhost:4000/api/cart/add', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ userId: user._id, productId: product._id, quantity: 1 })\r\n      }).catch(err => console.error('Erreur API Panier:', err));\r\n    }\r\n    alert(`âœ… ${product.name} ajoutÃ© au panier !`);\r\n  }\r\n\r\n  // Ajouter/Retirer de la wishlist\r\n  function handleAddToWishlist(product) {\r\n    const isInWishlist = wishlistItems.some(item => item._id === product._id);\r\n    if (isInWishlist) {\r\n      setWishlistItems(wishlistItems.filter(item => item._id !== product._id));\r\n      if (user) {\r\n        fetch('http://localhost:4000/api/wishlist/remove', {\r\n          method: 'POST',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify({ userId: user._id, productId: product._id })\r\n        });\r\n      }\r\n      alert(`ðŸ¤ ${product.name} retirÃ© de la liste`);\r\n    } else {\r\n      setWishlistItems([...wishlistItems, product]);\r\n      if (user) {\r\n        fetch('http://localhost:4000/api/wishlist/add', {\r\n          method: 'POST',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify({ userId: user._id, productId: product._id })\r\n        });\r\n      }\r\n      alert(`â¤ï¸ ${product.name} ajoutÃ© Ã  la liste !`);\r\n    }\r\n  }\r\n\r\n  // Supprimer du panier\r\n  function handleRemoveFromCart(productId) {\r\n    setCartItems(cartItems.filter(item => item._id !== productId));\r\n    if (user) {\r\n      fetch('http://localhost:4000/api/cart/remove', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ userId: user._id, productId: productId })\r\n      });\r\n    }\r\n  }\r\n\r\n  // Supprimer de la wishlist (via page Wishlist)\r\n  function handleRemoveFromWishlist(productId) {\r\n    setWishlistItems(wishlistItems.filter(item => item._id !== productId));\r\n    if (user) {\r\n      fetch('http://localhost:4000/api/wishlist/remove', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ userId: user._id, productId: productId })\r\n      });\r\n    }\r\n  }\r\n\r\n  // Validation du panier\r\n  async function handleCheckout() {\r\n    try {\r\n      for (const item of cartItems) {\r\n        await fetch('http://localhost:4000/api/purchase', {\r\n          method: 'POST',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify({ userId: user._id, productId: item._id })\r\n        });\r\n      }\r\n      setCartItems([]);\r\n      if (user) {\r\n        fetch(`http://localhost:4000/api/cart/clear/${user._id}`, { method: 'POST' });\r\n      }\r\n    } catch (err) {\r\n      throw new Error(\"Ã‰chec du paiement\");\r\n    }\r\n  }\r\n\r\n  // Protection par Login\r\n  if (!user) return <Login onLogin={handleLogin} />;\r\n\r\n  return (\r\n    <BrowserRouter>\r\n      {/* Navbar avec bouton dÃ©connexion correct */}\r\n      <Navbar user={user} cartCount={cartItems.length} onLogout={handleLogout} />\r\n      \r\n      <Routes>\r\n        <Route\r\n          path=\"/\"\r\n          element={\r\n            <Home\r\n              user={user}\r\n              cartItems={cartItems}\r\n              wishlistItems={wishlistItems}\r\n              onAddToCart={handleAddToCart}\r\n              onAddToWishlist={handleAddToWishlist}\r\n            />\r\n          }\r\n        />\r\n        <Route path=\"/recommendations\" element={<Recommendations user={user} />} />\r\n        <Route\r\n          path=\"/cart\"\r\n          element={<Cart cartItems={cartItems} onRemove={handleRemoveFromCart} onCheckout={handleCheckout} />}\r\n        />\r\n        <Route\r\n          path=\"/wishlist\"\r\n          element={<Wishlist wishlistItems={wishlistItems} onRemove={handleRemoveFromWishlist} />}\r\n        />\r\n        <Route path=\"/purchases\" element={<Purchases user={user} />} />\r\n      </Routes>\r\n    </BrowserRouter>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}